import { CodeSurferLayout, Code } from 'code-surfer'

# Custom Hooks

---

<CodeSurferLayout>
  <Code
    code={require('!!raw-loader!./custom-hooks.1.js').default}
    lang="jsx"
    title="Custom Hooks"
  />
  <Code
    code={require('!!raw-loader!./custom-hooks.2.js').default}
    focus="4:7"
    lang="jsx"
    title="Custom Hooks"
    subtitle="useQuery functions"
  />
  <Code
    code={require('!!raw-loader!./custom-hooks.3.js').default}
    focus="7:9"
    lang="jsx"
    title="Custom Hooks"
    subtitle="Throw API error"
  />
  <Code
    code={require('!!raw-loader!./custom-hooks.js').default}
    focus="4:14"
    lang="jsx"
    title="Custom Hooks"
    subtitle="Final useQuery functions"
  />
</CodeSurferLayout>

---

# Error Boundaries

---

<CodeSurferLayout>
  <Code
    code={require('!!raw-loader!./error-boundary.0.js').default}
    lang="jsx"
    title="Error Boundary"
  />
  <Code
    code={require('!!raw-loader!./error-boundary.1.js').default}
    focus="2:4"
    lang="jsx"
    title="Error Boundary"
    subtitle="getDerivedStateFromError functions"
  />
  <Code
    code={require('!!raw-loader!./error-boundary.2.js').default}
    focus="6:8"
    lang="jsx"
    title="Error Boundary"
    subtitle="Error state"
  />
  <Code
    code={require('!!raw-loader!./error-boundary.js').default}
    focus="11:23"
    lang="jsx"
    title="Error Boundary"
    subtitle="render functions"
  />
</CodeSurferLayout>

---

## Let's change the hooks approach

---

<CodeSurferLayout>
  <Code
    code={require('!!raw-loader!./approach-with-hooks.before.js').default}
    lang="jsx"
    title="Approach Using Hooks"
  />
  <Code
    code={require('!!raw-loader!./approach-with-hooks.after.js').default}
    lang="jsx"
    title="Approach Using Hooks"
  />
  <Code
    code={require('!!raw-loader!./approach-with-hooks.after.js').default}
    focus="5,15:17"
    lang="jsx"
    title="Approach Using Hooks"
  />
</CodeSurferLayout>

---

# The Good ✅

- Fetching is encapsulated and declarative
- Data dependencies and expressed alogside where they're used
- All operations are in a single scope
- Error states can be handled in a generalized manner

---

# The Bad 🔴

- ~~SelectionSets are error-prone~~
- ~~Multiple HOCs can produce bugs~~

---

# The Meh 🤷‍♀️

- ~~HOCs are difficult to understand~~
- ~~Options need to be computed far from the component~~
- ~~Welcome back to callback hell~~
- ~~The component hierarchy is extra deep~~
- Loading ~~and error state~~ require boilerplate
